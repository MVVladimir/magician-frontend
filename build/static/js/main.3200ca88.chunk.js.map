{"version":3,"sources":["components/AddTask.jsx","services/APIHelper.js","components/scene.jsx","App.jsx","reportWebVitals.ts","GlobalStyle.js","index.tsx"],"names":["React","Component","API_URL","nextId","a","axios","get","obj","getScene","counter","pictures","Scene","props","getState","console","log","state","notes","scene","backgroundImage","background","assistant","getStateForAssistant","createAssistant","on","event","action","dispatchAssistantAction","response","data","this","setState","read","item_selector","items","text","type","choice","add_note","sendData","action_id","options","forEach","item","index","id","moveTo","map","note","completed","filter","curImg","push","string","reverse","pic","length","then","setBackgrounds","img","styles","darkSber","size","style","className","src","height","width","offset","Button","marginBottom","stretch","onClick","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","DocumentStyle","createGlobalStyle","gradient","ThemeStyle","GlobalStyle","ReactDOM","render","StrictMode","Device","document","getElementById"],"mappings":"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","file":"static/js/main.3200ca88.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nimport \"../App.css\";\r\n\r\n\r\nexport class AddTask extends React.Component {\r\n\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {\r\n      note: '',\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const { onAdd } = this.props;\r\n\r\n    return (\r\n      <form\r\n        onSubmit={(event) => {\r\n          event.preventDefault();\r\n          onAdd(this.state.note);\r\n          this.setState({\r\n            note: '',\r\n          })\r\n        }}\r\n      >\r\n        <input\r\n          className   = \"add-task\"\r\n          type        = \"text\"\r\n          placeholder = \"Add Note\"\r\n          value       = { this.state.note }\r\n          onChange    = {({ target: { value } }) => this.setState({\r\n            note: value,\r\n          })}\r\n          required\r\n          autoFocus\r\n        />\r\n      </form>\r\n    )\r\n  }\r\n\r\n}\r\n\r\n","import axios from \"axios\";\r\n\r\nconst API_URL = \"https://magicianapp.herokuapp.com\";\r\n\r\nasync function getScene(nextId) {\r\n    const obj = await axios.get(`${API_URL}/nodes/${nextId}`);\r\n    return obj;\r\n}\r\n\r\nexport default getScene;\r\nexport { API_URL };","import {TaskList} from '../pages/TaskList';\r\nimport getScene, { API_URL } from '../services/APIHelper.js'\r\nimport React, { useEffect, useState } from 'react';\r\n\r\nimport {\r\n  createSmartappDebugger,\r\n  createAssistant,\r\n} from \"@sberdevices/assistant-client\";\r\n\r\nimport { darkSber } from '@sberdevices/plasma-tokens/themes';\r\nimport { Button } from '@sberdevices/ui/components/Button/Button';\r\nimport { Container, Row, Col } from '@sberdevices/plasma-ui/components/Grid';\r\nimport { Image } from '@sberdevices/ui/components/Image/Image'\r\n\r\nimport './scene.css';\r\n\r\nlet currentId = 1;\r\n\r\nlet counter = 0;\r\nlet pictures = [];\r\n\r\nconst setBackground = {\r\n  backgroundImage: ''\r\n}\r\n\r\nconst initializeAssistant = (getState/*: any*/) => {\r\n  if (process.env.NODE_ENV === \"development\") {\r\n    return createSmartappDebugger({\r\n      token: process.env.REACT_APP_TOKEN ?? \"\",\r\n      initPhrase: `Запусти ${process.env.REACT_APP_SMARTAPP}`,\r\n      getState,\r\n    });\r\n  }\r\n  return createAssistant({ getState });\r\n};\r\n\r\n\r\nconst fetchedData = async (id) => {\r\n  return await getScene(id);\r\n}\r\n\r\nexport class Scene extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log('constructor');\r\n\r\n    //this.value = 0;\r\n\r\n    this.state = {\r\n      notes: [],\r\n    //}\r\n    //this.state = {\r\n      scene:           null,\r\n      backgroundImage: { background: '' }\r\n    };\r\n\r\n    this.assistant = initializeAssistant(() => this.getStateForAssistant() );\r\n    this.assistant.on(\"data\", (event/*: any*/) => {\r\n      console.log(`assistant.on(data)`, event);\r\n      const { action } = event\r\n      this.dispatchAssistantAction(action);\r\n    });\r\n    this.assistant.on(\"start\", (event) => {\r\n      console.log(`assistant.on(start)`, event);\r\n    });\r\n\r\n  }\r\n\r\n  async componentDidMount() {\r\n    console.log('componentDidMount');\r\n    const response = await getScene(currentId);\r\n    console.log(response);\r\n    const { data } = response;\r\n    this.setState({ scene: data });\r\n    this.read();\r\n  }\r\n\r\n  getStateForAssistant () {\r\n    console.log('getStateForAssistant: this.state:', this.state)\r\n    const state = {\r\n      item_selector: {\r\n        items: { text : this.state.scene.text }\r\n      }\r\n    };\r\n\r\n    console.log('getStateForAssistant: state:', state)\r\n    return state;\r\n  }\r\n\r\n  dispatchAssistantAction (action) {\r\n    console.log('dispatchAssistantAction', action);\r\n    if (action) {\r\n      switch (action.type) {\r\n        case 'add_note':\r\n          console.log('add_note', action, 'action.choice = ', action.choice);\r\n          return this.add_note(action);\r\n\r\n        \r\n        case 'read':\r\n          return this.read();\r\n\r\n        /*\r\n        case 'delete_note':\r\n          return this.delete_note(action);\r\n\r\n        default:\r\n          throw new Error();\r\n        */\r\n      }\r\n    }\r\n  }\r\n\r\n  read () {\r\n    this.assistant.sendData( { action : { action_id : 'read' } } );\r\n  }\r\n\r\n  add_note (action) {\r\n    let choice = action.choice;\r\n    console.log(choice);\r\n\r\n    if (choice == 'один' || choice == 'первый' || choice == 'первое' || choice == 'первую') {\r\n      choice = 1;\r\n    }\r\n    if (action.choice == 'два' || choice == 'второй'|| choice == 'второе' || choice == 'вторую') {\r\n      choice = 2;\r\n    }\r\n    if (action.choice == 'три' || choice == 'третий'|| choice == 'третье' || choice == 'третью') {\r\n      choice = 3;\r\n    }\r\n    if (action.choice == 'четыре' || choice == 'четвертый'|| choice == 'четвертое' || choice == 'четвертую') {\r\n      choice = 4;\r\n    }\r\n\r\n    this.state.scene.options.forEach((item, index) => {\r\n      console.log('index = ', index, 'choice = ', choice);\r\n      if ((item.text === choice) || (index + 1 === choice)) {\r\n        console.log('movedTo', item.id);\r\n        this.moveTo(item.id);\r\n      }\r\n    })\r\n    //return this.state;\r\n  }\r\n\r\n  /*add_note (action) {\r\n    console.log('add_note', action);\r\n    this.setState({\r\n      notes: [\r\n        ...this.state.notes,\r\n        {\r\n          id:        Math.random().toString(36).substring(7),\r\n          title:     action.note,\r\n          completed: false,\r\n        },\r\n      ],\r\n    })\r\n  }*/\r\n\r\n  done_note (action) {\r\n    console.log('done_note', action);\r\n    this.setState({\r\n      notes: this.state.notes.map((note) =>\r\n        (note.id === action.id)\r\n        ? { ...note, completed: !note.completed }\r\n        : note\r\n      ),\r\n    })\r\n  }\r\n\r\n  delete_note (action) {\r\n    console.log('delete_note', action);\r\n    this.setState({\r\n      notes: this.state.notes.filter(({ id }) => id !== action.id),\r\n    })\r\n  }\r\n\r\n  setBackgrounds (curImg) {\r\n    pictures.push(curImg);\r\n    //debugger;\r\n    let string = ``;\r\n    pictures.reverse();\r\n    pictures.forEach((pic, index) => {\r\n      string = string + `url(${API_URL}/${pic}.png) center no-repeat`;\r\n      if (index < pictures.length - 1){\r\n        string = string + ',';\r\n      }\r\n    });\r\n    //setBackgroundImage({background : string});\r\n    this.setState({ backgroundImage: {background : string}})\r\n    pictures.reverse();\r\n  }\r\n  \r\n  moveTo(nextId) {\r\n    //fetchedData(nextId)\r\n    getScene(nextId)\r\n      .then((response) => {\r\n        const { data } = response;\r\n        //setScene(data);\r\n        this.setState({ scene: data });\r\n        this.read();\r\n      })\r\n    counter++;\r\n    if (counter > 2) {\r\n      this.setBackgrounds(this.state.scene.img);\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    //const [scene, setScene] = useState(null);\r\n    //const [scene, setScene] = useState(null);\r\n\r\n    //const [backgroundImage, setBackgroundImage] = useState({background : ''});\r\n\r\n    //const fetchedData = async (id) => {\r\n    //    return await getScene(id);\r\n    //}\r\n    //\r\n    //useEffect(() => {\r\n    //    fetchedData(currentId).then((response) => {\r\n    //        console.log(response);\r\n    //        const { data } = response;\r\n    //        setScene(data);\r\n    //    })\r\n    //}, []);\r\n\r\n     const { scene, backgroundImage } = this.state;\r\n\r\n    /*изначально было setBackgroundImage({background : `url(${API_URL}/${curImg}.png) center no-repeat`});*/\r\n\r\n\r\n\r\n    if (scene) {\r\n      if (scene.options) {\r\n        return(\r\n          <Container styles={darkSber} >\r\n\r\n              <Row>\r\n                <Col  type=\"calc\" size={3}>\r\n                  <div style={backgroundImage} className = 'img-Wrapper'> <img  src={API_URL + '/' + scene.img + '.png' } height={'450'} width={'450'} /> </div>\r\n                </Col>\r\n                 \r\n                \r\n                <Col  type=\"calc\" offset={2} size={5}>\r\n                  <h1> { scene.text   } </h1>\r\n                  {\r\n                    scene.options.map((item) => {\r\n                      return (\r\n                        <Row>\r\n                          <Button style={{ marginBottom: '1rem', width: '100%' }} stretch={true} size=\"l\" onClick={ () => this.add_note({choice: item.text}) }>\r\n                            {item.text}\r\n                          </Button>\r\n                        </Row>\r\n                      \r\n                      );\r\n                    })\r\n                  }\r\n                </Col>\r\n\r\n            </Row>\r\n          </Container>\r\n        );\r\n      } else {\r\n        return(\r\n          <Container styles={darkSber} >\r\n            <img src={API_URL + '/' + scene.img + '.png' } height={'450'} width={'450'} />\r\n            <h1> { scene.text } </h1>\r\n          </Container>\r\n        )\r\n      }\r\n\r\n    } else {\r\n      return <h1>Nothing...</h1>\r\n    }\r\n  }\r\n}\r\n\r\nexport default Scene;\r\n","import React from \"react\";\r\nimport {\r\n  createSmartappDebugger,\r\n  createAssistant,\r\n} from \"@sberdevices/assistant-client\";\r\nimport { Container } from '@sberdevices/plasma-ui/components/Grid';\r\n\r\nimport \"./App.css\";\r\nimport Scene from './components/scene';\r\nimport { TaskList } from './pages/TaskList';\r\n\r\n\r\n\r\nexport class App extends React.Component {\r\n\r\n  render() {\r\n    console.log('render');\r\n    return (\r\n      <Container>\r\n\r\n        <Scene />\r\n\r\n      </Container>\r\n    )\r\n  }\r\n\r\n\r\n}\r\n\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);  \r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n}\r\n\r\nexport default reportWebVitals;\r\n","// GlobalStyle.tsx\r\nimport { createGlobalStyle } from 'styled-components';\r\nimport { darkSber } from '@sberdevices/plasma-tokens/themes'; // Или один из списка: darkEva, darkJoy, lightEva, lightJoy, lightSber\r\nimport {\r\n    text, // Цвет текста\r\n    background, // Цвет подложки\r\n    gradient, // Градиент\r\n} from '@sberdevices/plasma-tokens';\r\n\r\nconst DocumentStyle = createGlobalStyle`\r\n    html:root {\r\n        min-height: 100vh;\r\n        color: ${text};\r\n        background-color: ${background};\r\n        background-image: ${gradient};\r\n    }\r\n`;\r\nconst ThemeStyle = createGlobalStyle(darkSber);\r\nexport const GlobalStyle = () => (\r\n    <>\r\n        <DocumentStyle />\r\n        <ThemeStyle />\r\n    </>\r\n);","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport { App } from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\n\r\nimport { DeviceThemeProvider } from '@sberdevices/plasma-ui/components/Device'; // Типографика, имеющая размеры, зависимые от типа устройства\r\nimport { GlobalStyle } from './GlobalStyle'; // Тема оформления (цветовая схема)\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <DeviceThemeProvider>\r\n      <GlobalStyle />\r\n      <App />\r\n    </DeviceThemeProvider>,\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}